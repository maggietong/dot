#!/bin/bash
set +x
MYNAME=$(basename "$0")

case "$MYNAME" in

    vim)
        MODE_OPTS=""
        ;;

    editor)
        MODE_OPTS=""
        ;;

    vi)
        MODE_OPTS=""
        ;;

    view)
        MODE_OPTS="-R"
        ;;

    vimdiff)
        MODE_OPTS="-d"
        ;;

    *)
        echo "I don't know what to think when you call me '${MYNAME}'" >&2
        exit 1
        ;;
esac

mkdir -p ~/.vim/logs
LOGFILE=~/.vim/logs/$(date +%s).log  # I don't have time to mess with this. so...don't run out of disk space.

# 15 is the min to include line numbers for all parse *.vim files
SPECIAL_OPTS="-V15${LOGFILE}"
rm -f $LOGFILE

LOCAL_VIM="/usr/local/Cellar/vim/7.4.052/bin/vim"

if [ -e "${LOCAL_VIM}" ] ; then
    "${LOCAL_VIM}" ${SPECIAL_OPTS} ${MODE_OPTS} "$@"
else
    /usr/bin/vim ${SPECIAL_OPTS} ${MODE_OPTS} "$@"
fi
